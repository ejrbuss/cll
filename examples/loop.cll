(defn loop [n]
  (let { i (ref 0) }
    (while (< @i n)
      (set! i (++ @i)))
  @i))

(println (loop 1e6))